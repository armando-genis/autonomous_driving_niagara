<?xml version="1.0"?>
<robot name="dasautonomeauto" xmlns:xacro="http://www.ros.org/wiki/xacro">


  <xacro:property name="tire_dia" value="0.350"/>  <!-- Reduced from 0.440 -->
  <xacro:property name="tire_width" value="0.195"/>  <!-- Reduced from 0.195 -->
  <xacro:property name="hub_dia" value="0.235"/>  <!-- Reduced from 0.235 -->

  <xacro:property name="hex_hub_depth" value="0.120"/> <!-- or +0.072 -->  
  <xacro:property name="wheel_mass" value="8.0"/>   <!-- check -->


  <xacro:property name="wheelbase" value="2.1"/>
  <xacro:property name="hex_hub_dist" value="0.9191"/>  <!-- 1.127 0.742 0.900 check -->
  <xacro:property name="axle_length" value="0.120"/> 
  <xacro:property name="wheel_travel" value="0.209492959255614"/> 

  <xacro:property name="axle_eff_limit" value="204.95"/>
  <xacro:property name="axle_vel_limit" value="39.02"/>


  <xacro:macro name="thick_walled_tube_inertial"
               params="inner_rad outer_rad height mass">
    <inertial>
      <mass value="${mass}"/>
      <inertia ixx="${(1 / 12) * mass * (3 * (inner_rad * inner_rad +
                    outer_rad * outer_rad) + height * height)}"
               ixy="0" ixz="0"
               iyy="${(1 / 12) * mass * (3 * (inner_rad * inner_rad +
                    outer_rad * outer_rad) + height * height)}"
               iyz="0"
               izz="${mass * (inner_rad * inner_rad +
                    outer_rad * outer_rad) / 2}"/>
    </inertial>
  </xacro:macro>

  <xacro:macro name="null_inertial">
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </xacro:macro>

    
  <xacro:macro name="wheel" params="lr_prefix fr_prefix lr_reflect">


    <link name="${lr_prefix}_${fr_prefix}_wheel">
      <visual>
        <origin xyz="0
                     0
                     ${lr_reflect * (axle_length - (tire_width / 2 - hex_hub_depth))}"/>
        <geometry>
          <cylinder radius="${tire_dia / 2}" length="${tire_width}"/>
        </geometry>
        <material name="tire_mat"/>
      </visual>

      <collision>
        <origin xyz="0                     
                     0
                     ${lr_reflect * (axle_length - (tire_width / 2 - hex_hub_depth))}"/>
        <geometry>
          <cylinder radius="${tire_dia / 2}" length="${tire_width}"/>
        </geometry>
      </collision>

      <xacro:thick_walled_tube_inertial
          inner_rad="${hub_dia / 2}" outer_rad="${tire_dia / 2}"
          height="${tire_width}" mass="${wheel_mass}"/>
    </link>


    <joint name="${lr_prefix}_${fr_prefix}_axle" type="continuous">
      <parent link="base_link"/>
      <child link="${lr_prefix}_${fr_prefix}_wheel"/>
      <origin xyz="${fr_reflect * wheelbase / 2}
                   ${lr_reflect * ((hex_hub_dist / 2) - axle_length)}
                   ${-wheel_travel}" rpy="1.5708 0 0"/>
      <axis xyz="0 0 -1"/>
      <limit effort="${axle_eff_limit}" velocity="${axle_vel_limit}"/>
    </joint>

  </xacro:macro>

    <xacro:macro name="front_wheel" params="lr_prefix fr_prefix lr_reflect fr_reflect">
        <xacro:wheel lr_prefix="${lr_prefix}" fr_prefix="${fr_prefix}" lr_reflect="${lr_reflect}"/>
    </xacro:macro>

    <xacro:macro name="rear_wheel" params="lr_prefix fr_prefix lr_reflect fr_reflect">
        <xacro:wheel lr_prefix="${lr_prefix}" fr_prefix="${fr_prefix}" lr_reflect="${lr_reflect}"/>
    </xacro:macro>




  

</robot>